<%= turbo_frame_tag 'form-frame' do %>
<div class="row">
  <div class="col-md-6">
    <!-- Movie image -->
    <% if @movie.poster.attached? %>
      <img src="<%= url_for(@movie.poster) %> " class="img-fluid mb-4" alt="Movie Poster">
    <% else %>
      <img src="<%= url_for(@movie.poster_url) %> " class="img-fluid mb-4" alt="Movie Poster">
    <% end %>
  </div>
  <div class="col-md-6">
    <h1><%= @movie.title %></h1>
    <!-- Movie release date -->
    <p><strong>Release Date:</strong> <%= @movie.release_date %></p>
    <!-- Movie description -->
    <p><strong>Description:</strong> <%= @movie.description %></p>
    <!-- Add comment form -->
    <%= form_with(model: [@movie, Comment.new], url: movie_comments_path(@movie)) do |form| %>
      <div class="form-group">
        <%= form.label :content %>
        <%= form.text_area :content, class: 'form-control' %>
      </div>
      <%= form.submit 'Add Comment', class: 'btn btn-primary' %>
    <% end %>
    <!-- Comments list -->
    <h2 class="mt-4">Comments</h2>
    <ul class="list-group">
      <% @movie.comments.each do |comment| %>
        <li class="list-group-item"><%= comment.content %></li>
      <% end %>
    </ul>


    <!-- Add comment form -->
    <%= form_with(model: [@movie, Review.new], url: movie_reviews_path(@movie)) do |form| %>
      <div class="form-group">
        <%= form.label :content %>
        <%= form.text_area :content, class: 'form-control' %>
      </div>
      <%= form.submit 'Add Review', class: 'btn btn-primary' %>
    <% end %>


    <!-- Reviews list -->
    <h2 class="mt-4">Reviews</h2>
    <ul class="list-group">
      <% @movie.reviews.each do |review| %>
        <li class="list-group-item"><%= review.content %></li>
      <% end %>
    </ul>
  </div>
</div>

<div>
  <% if @movie.trailer.attached? %>
    <%= link_to "Play Trailer", url_for(@movie.trailer), class: "btn btn-primary" %>
  <% else %>
    <!-- Display a message indicating no trailer is available -->
  <% end %>
</div>
<% end %>
